<html>
  <head>
  <link rel="stylesheet" href="style.css">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {
        'packages':['geochart'],
        // Note: you will need to get a mapsApiKey for your project.
        // See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
        'mapsApiKey': 'AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY'
      });
      google.charts.setOnLoadCallback(drawRegionsMap);
      dataset =  [['Country', 'sfsdf']];
      console.log(dataset);
      function drawRegionsMap(d = dataset) {  
		  console.log(d);
        var data = google.visualization.arrayToDataTable(d);

        // var options = {};
        var options = {
          backgroundColor: 'black'
        };

        var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

        chart.draw(data, options);
      }
    </script>
  </head>
  <body>

  <div id="regions_div" style="width: 1480px; height: 890px;"></div>
  <div class="slidecontainer">
  <input type="range" min="2002" max="2017" value="2002" class="slider" id="myRange">
  </div>
  
  <p id="demo">dummy</p>
  
  <form id ="lstock" action = "/Database.php" method = "get">
<input class = "livestockSelector" type = "checkbox" name ="l1" value="04 Dairy Prods; Birds Eggs; Honey; Ed Animal Pr Nesoi">Bovine Animals, Live<br>
<input class = "livestockSelector" type = "checkbox" name ="l2" value="0102 Bovine Animals, Live">Swine, Live<br>
<input class = "livestockSelector" type = "checkbox" name ="l3" value="0103 Swine, Live">Chickens, Ducks, Geese, Turkeys, And Guineas, Live<br>
<input class = "livestockSelector" type = "checkbox" name ="l4" value="0105 Chickens, Ducks, Geese, Turkeys, And Guineas, Live">Corn (maize)<br>
<input class = "livestockSelector" type = "checkbox" name ="l5" value="1005 Corn (maize)">Corn (maize) Seed, Certified, Excluding Sweet Corn<br>
<input class = "livestockSelector" type = "checkbox" name ="l6" value="100510 Corn (maize) Seed, Certified, Excluding Sweet Corn">Corn (maize), Other Than Seed Corn<br>
<input class = "livestockSelector" type = "checkbox" name ="l7" value="100590 Corn (maize), Other Than Seed Corn">Corn (maize) Flour<br>
<input class = "livestockSelector" type = "checkbox" name ="l8" value="110220 Corn (maize) Flour">Groats And Meal Of Corn (maize)<br>
<input class = "livestockSelector" type = "checkbox" name ="l9" value="110423 Grains Worked (hulld Pearld Sliced Kibbld) Of Corn">Grains (Worked) Of Corn<br>
<input class = "livestockSelector" type = "checkbox" name ="l10" value="151521 Corn (maize) Oil, Crude, Not Chemically Modified">Non- chemically modified crude Corn (maize) Oil<br>
<input class = "livestockSelector" type = "checkbox" name ="l11" value="151529 Corn (maize) Oil, Refined, & Fractions, Not Modif">Refined and fractions Corn (maize) Oil (Not Modified)<br>
<input class = "livestockSelector" type = "checkbox" name ="l12" value="230210 Bran Sharps & Oth Residues Derived Frm Millng Corn">Bran Sharps & Other Residues Derived From Millng Corn<br>
<input class = "livestockSelector" type = "checkbox" name ="l13" value="230670 Corn Germ Oilcake Othr Solid Residue Wh/not Ground">Germ Oilcake<br>
<input class = "livestockSelector" type = "checkbox" name ="l14" value="110812 Starch, Corn (maize)">Meat And Edible Meat Offal<br>
<input class = "livestockSelector" type = "checkbox" name ="l15" value="02 Meat And Edible Meat Offal">Dairy Prods; Birds Eggs; Honey<br>
<input class = "livestockSelector" type = "checkbox" name ="l16" value="110313 Groats And Meal Of Corn (maize)">Starch, Corn (maize)<br>
  </form>
  <button type="button" onclick="sendYear()">Click Here for the animation</button>

  <script type="text/javascript">
  	var slider = document.getElementById("myRange");
		var output = document.getElementById("demo");
    
		console.log(slider.value);
		output.innerHTML = slider.value; // Display the default slider value

		// Update the current slider value (each time you drag the slider handle)
		slider.oninput = function() {
			output.innerHTML = this.value;
			// use ajax to pass values to the database.php page
		}
		
		function sendYear(){
      var livestock_string = "(";
      var livestock_values = document.getElementsByClassName('livestockSelector');
      for (var i=0; i < livestock_values.length; i++){
        if(livestock_values[i].checked) {
          if (livestock_string.length == 1){
            livestock_string = livestock_string + "'" + livestock_values[i].value + "'";
          } else {
            livestock_string = livestock_string + ", '" + livestock_values[i].value + "'";
          }
        }
      }
      livestock_string = livestock_string + ")";
			$.ajax({
				type: 'POST',
				data: {'val': slider.value, 'livestock': livestock_string},
				url: 'Database.php',
				success: function(query_result){
          console.log(JSON.parse(query_result));
          dataset = JSON.parse(query_result);
          google.charts.setOnLoadCallback(drawRegionsMap);
        }
			});
		}
		</script>
  </body>
</html>
